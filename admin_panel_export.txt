--------------------------------------------------
### File: src/pages/admin/AdminLayout.jsx
--------------------------------------------------
import React, { useEffect } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import {
  LayoutDashboard, Users, CreditCard, Ticket,
  Activity, Settings, ShieldAlert, LogOut, Send, FileText
} from 'lucide-react';
import { useAuth } from '../../context/AuthContext';
import ThemeToggle from '../../components/ThemeToggle';

const sidebarItems = [
  { icon: LayoutDashboard, label: 'Overview', href: '/admin' },
  { icon: Users, label: 'Users', href: '/admin/users' },
  { icon: FileText, label: 'Activity Logs', href: '/admin/activity' },
  { icon: Settings, label: 'Plans & Config', href: '/admin/plans' },
  { icon: Ticket, label: 'Coupons', href: '/admin/coupons' },
  { icon: CreditCard, label: 'Transactions', href: '/admin/finance' },
  { icon: Activity, label: 'System Health', href: '/admin/health' },
  { icon: ShieldAlert, label: 'Security & Logs', href: '/admin/security' },
];

export default function AdminLayout({ children }) {
  const location = useLocation();
  const { user, isAuthenticated, logout, loading } = useAuth();
  const navigate = useNavigate();

  useEffect(() => {
    if (!loading) {
      if (!isAuthenticated) {
        navigate('/login');
      } else if (user?.role !== 'ADMIN') {
        navigate('/');
      }
    }
  }, [isAuthenticated, user, loading, navigate]);

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  if (loading || !user || user.role !== 'ADMIN') {
    return <div className="min-h-screen bg-zinc-50 dark:bg-zinc-950 flex items-center justify-center text-zinc-500">Loading Admin Panel...</div>;
  }

  return (
    <div className="flex min-h-screen w-full bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100 font-sans transition-colors duration-300">
      {/* Sidebar */}
      <aside className="fixed left-0 top-0 z-40 h-screen w-64 border-r border-zinc-200 dark:border-zinc-800 bg-white/50 dark:bg-zinc-900/50 backdrop-blur-xl transition-colors duration-300">
        <div className="flex h-16 items-center px-6 border-b border-zinc-200 dark:border-zinc-800">
          <Link to="/" className="flex items-center gap-2 group">
            <Send className="h-5 w-5 text-indigo-600 dark:text-indigo-500 group-hover:-translate-y-0.5 group-hover:translate-x-0.5 transition-transform" />
            <span className="text-lg font-bold tracking-tighter text-zinc-900 dark:text-white">
              PDF<span className="text-indigo-600 dark:text-indigo-500">ly</span>
              <span className="text-zinc-500 dark:text-zinc-600 text-[10px] ml-2 align-top tracking-widest font-medium">ADMIN</span>
            </span>
          </Link>
        </div>

        <div className="flex flex-col gap-1 p-4">
          {sidebarItems.map((item) => {
            const isActive = location.pathname === item.href;
            return (
              <Link key={item.href} to={item.href}>
                <button
                  className={`flex w-full items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200 
                    ${isActive
                      ? 'bg-zinc-100 dark:bg-zinc-800 text-indigo-600 dark:text-white shadow-sm border border-zinc-200 dark:border-zinc-700/50'
                      : 'text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800/50'}`}
                >
                  <item.icon className={`h-4 w-4 ${isActive ? 'text-indigo-600 dark:text-indigo-500' : 'text-zinc-500'}`} />
                  {item.label}
                </button>
              </Link>
            );
          })}
        </div>

        <div className="absolute bottom-4 left-4 right-4">
          <button
            onClick={handleLogout}
            className="flex w-full items-center justify-center gap-2 rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 py-2 text-sm text-zinc-600 dark:text-zinc-400 hover:bg-zinc-50 dark:hover:bg-zinc-800 hover:text-red-500 dark:hover:text-red-400 transition-colors"
          >
            <LogOut className="h-4 w-4" /> Sign Out
          </button>
        </div>
      </aside>

      {/* Main Content Area */}
      <main className="pl-64 w-full flex flex-col">
        {/* Top Header */}
        <header className="sticky top-0 z-30 flex h-16 items-center justify-between border-b border-zinc-200 dark:border-zinc-800 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-md px-8 transition-colors duration-300">
          <h1 className="text-lg font-semibold text-zinc-900 dark:text-zinc-200">
            {sidebarItems.find(i => i.href === location.pathname)?.label || 'Dashboard'}
          </h1>
          <div className="flex items-center gap-4">
            <div className="text-right hidden md:block">
              <p className="text-sm font-medium text-zinc-900 dark:text-white">{user.email}</p>
              <p className="text-xs text-zinc-500">Super Admin</p>
            </div>
            <ThemeToggle />
            <div className="h-9 w-9 rounded-full bg-indigo-500/10 border border-indigo-500/20 flex items-center justify-center text-xs font-bold text-indigo-600 dark:text-indigo-400">
              {user.email.substring(0, 2).toUpperCase()}
            </div>
            <button
              onClick={handleLogout}
              className="ml-2 p-2 text-zinc-400 hover:text-red-500 dark:hover:text-red-400 transition-colors rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800"
              title="Sign Out"
            >
              <LogOut className="h-5 w-5" />
            </button>
          </div>
        </header>

        {/* Page Content */}
        <div className="flex-1 p-8 space-y-8 overflow-auto">
          {children}
        </div>
      </main>
    </div>
  );
}

--------------------------------------------------
### File: src/pages/admin/AdminLogin.jsx
--------------------------------------------------
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { motion } from 'framer-motion';
import { Mail, Lock, ArrowRight, Loader2, AlertTriangle, Shield, Sun, Moon } from 'lucide-react';
import axios from 'axios';
import { useAuth } from '../../context/AuthContext';
import { useTheme } from 'next-themes';

const API_URL = "http://localhost:8080/api/auth/login";

export default function AdminLogin() {
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);
    const [email, setEmail] = useState("");
    const [password, setPassword] = useState("");
    const navigate = useNavigate();
    const { login } = useAuth();
    const { theme, setTheme } = useTheme();

    const handleLogin = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError(null);

        try {
            const response = await axios.post(API_URL, { email, password });

            if (response.status === 200 && response.data.token) {
                const { token, email: userEmail, role, plan, planExpiry, dailyUsageCount } = response.data;

                // Check if user is admin
                if (role !== 'ADMIN') {
                    setError("Access denied. This portal is for administrators only.");
                    return;
                }

                // Update Global Context State
                login(token, userEmail, role, plan, planExpiry, dailyUsageCount);

                // Redirect to Admin Dashboard
                navigate('/admin');
            } else {
                setError("Invalid response from server.");
            }
        } catch (err) {
            if (err.response && err.response.status === 403) {
                setError(err.response.data || "Your account has been banned.");
            } else if (err.response && err.response.status === 401) {
                setError("Invalid credentials. Please check your email and password.");
            } else {
                setError("Login failed. Please check your connection and try again.");
            }
        } finally {
            setLoading(false);
        }
    };

    return (
        <div className="relative min-h-screen w-full flex items-center justify-center bg-zinc-950 overflow-hidden">
            {/* Theme Toggle */}
            <button
                onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}
                className="absolute top-6 right-6 z-50 p-2 rounded-full bg-zinc-900/80 backdrop-blur-sm border border-zinc-800 shadow-sm hover:scale-105 transition-all text-zinc-400 hover:text-indigo-400"
            >
                {theme === 'dark' ? <Sun className="h-5 w-5" /> : <Moon className="h-5 w-5" />}
            </button>

            {/* Background Grid */}
            <div className="absolute inset-0 h-full w-full bg-[radial-gradient(#27272a_1px,transparent_1px)] [background-size:16px_16px] [mask-image:radial-gradient(ellipse_50%_50%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none" />

            {/* Animated Gradient Blob - Red/Orange for Admin */}
            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-br from-red-500/20 via-orange-500/10 to-amber-500/20 rounded-full blur-3xl pointer-events-none animate-pulse" />

            <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 0.5, ease: "easeOut" }}
                className="relative z-10 w-full max-w-[420px] p-4"
            >
                {/* Admin Badge Header */}
                <div className="mb-8 text-center">
                    <div className="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 mb-4 shadow-lg shadow-red-500/25">
                        <Shield className="h-8 w-8 text-white" />
                    </div>
                    <h2 className="text-2xl font-bold tracking-tight text-white">Admin Portal</h2>
                    <p className="text-sm text-zinc-400 mt-2">Secure access for administrators only</p>
                </div>

                <div className="relative overflow-hidden rounded-2xl bg-zinc-900/90 backdrop-blur-xl border border-zinc-800/50 shadow-[0_8px_40px_-12px_rgba(0,0,0,0.5)] p-8 ring-1 ring-zinc-100/5">
                    {/* Subtle Red Gradient Overlay */}
                    <div className="absolute inset-0 bg-gradient-to-br from-red-500/5 via-transparent to-orange-500/5 pointer-events-none" />

                    <div className="relative z-10">
                        <form onSubmit={handleLogin} className="space-y-5">
                            {error && (
                                <motion.div
                                    initial={{ opacity: 0, y: -10 }}
                                    animate={{ opacity: 1, y: 0 }}
                                    className="flex items-center gap-2 text-sm text-red-400 p-3 rounded-lg bg-red-500/10 border border-red-500/20"
                                >
                                    <AlertTriangle className="h-4 w-4 flex-shrink-0" /> {error}
                                </motion.div>
                            )}

                            {/* Email Input */}
                            <div className="space-y-2">
                                <label className="text-xs font-medium text-zinc-500 uppercase tracking-wider">Admin Email</label>
                                <div className="relative">
                                    <Mail className="absolute left-3 top-2.5 h-5 w-5 text-zinc-500" />
                                    <input
                                        type="email"
                                        required
                                        placeholder="admin@pdfly.io"
                                        value={email}
                                        onChange={(e) => setEmail(e.target.value)}
                                        className="w-full rounded-lg border border-zinc-700 bg-zinc-900/50 pl-10 py-2.5 text-sm outline-none focus:border-red-500 focus:ring-4 focus:ring-red-500/10 text-white placeholder-zinc-500 transition-all"
                                    />
                                </div>
                            </div>

                            {/* Password Input */}
                            <div className="space-y-2">
                                <label className="text-xs font-medium text-zinc-500 uppercase tracking-wider">Password</label>
                                <div className="relative">
                                    <Lock className="absolute left-3 top-2.5 h-5 w-5 text-zinc-500" />
                                    <input
                                        type="password"
                                        required
                                        placeholder="••••••••"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        className="w-full rounded-lg border border-zinc-700 bg-zinc-900/50 pl-10 py-2.5 text-sm outline-none focus:border-red-500 focus:ring-4 focus:ring-red-500/10 text-white placeholder-zinc-500 transition-all"
                                    />
                                </div>
                            </div>

                            <button
                                type="submit"
                                disabled={loading}
                                className="group relative w-full overflow-hidden rounded-lg bg-gradient-to-r from-red-600 to-orange-600 py-3 text-sm font-semibold text-white transition-all hover:from-red-500 hover:to-orange-500 disabled:opacity-70 shadow-lg shadow-red-500/25"
                            >
                                {loading ? (
                                    <span className="flex items-center justify-center gap-2">
                                        <Loader2 className="h-4 w-4 animate-spin" /> Authenticating...
                                    </span>
                                ) : (
                                    <span className="flex items-center justify-center gap-2">
                                        Access Dashboard <ArrowRight className="h-4 w-4 transition-transform group-hover:translate-x-1" />
                                    </span>
                                )}
                            </button>
                        </form>
                    </div>
                </div>

                {/* Footer */}
                <p className="text-center text-xs text-zinc-600 mt-6">
                    This portal is restricted. Unauthorized access attempts are logged.
                </p>
            </motion.div>
        </div>
    );
}


--------------------------------------------------
### File: src/pages/admin/Dashboard.jsx
--------------------------------------------------
import React from 'react';
import AdminLayout from './AdminLayout';
import { Users, IndianRupee, HardDrive, Cpu, ArrowUpRight } from 'lucide-react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
import axios from 'axios';

// Mock Data for the chart
const trafficData = [
  { name: 'Mon', files: 120 }, { name: 'Tue', files: 250 },
  { name: 'Wed', files: 180 }, { name: 'Thu', files: 310 },
  { name: 'Fri', files: 290 }, { name: 'Sat', files: 100 },
  { name: 'Sun', files: 140 },
];

import { useAuth } from '../../context/AuthContext';

import { useTheme } from 'next-themes';

export default function AdminDashboard() {
  const [stats, setStats] = React.useState({ activeUsers: 0, totalRevenue: 0, revenueGrowth: 0 });
  const { token } = useAuth();
  const { theme } = useTheme();

  React.useEffect(() => {
    if (token) {
      fetchStats();
    }
  }, [token]);

  const fetchStats = async () => {
    try {
      const response = await axios.get('http://localhost:8080/api/admin/stats', {
        headers: { Authorization: `Bearer ${token}` }
      });
      setStats(response.data);
    } catch (error) {
      console.error('Failed to fetch stats', error);
    }
  };

  const isDark = theme === 'dark';
  const chartGridColor = isDark ? "#27272a" : "#e4e4e7";
  const chartAxisColor = isDark ? "#71717a" : "#a1a1aa";
  const tooltipBg = isDark ? "#18181b" : "#ffffff";
  const tooltipBorder = isDark ? "#27272a" : "#e4e4e7";
  const tooltipText = isDark ? "#fff" : "#000";

  return (
    <AdminLayout>
      {/* 1. Metric Cards Row */}
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4">

        {/* Revenue Card (Updated to INR) */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">Total Revenue</h3>
            <IndianRupee className="h-4 w-4 text-emerald-500" />
          </div>
          <div className="mt-2 text-2xl font-bold text-zinc-900 dark:text-white">₹{stats.totalRevenue || 0}</div>
          <p className={`flex items-center text-xs mt-1 ${stats.revenueGrowth >= 0 ? 'text-emerald-500' : 'text-red-500'}`}>
            <ArrowUpRight className={`h-3 w-3 mr-1 ${stats.revenueGrowth < 0 ? 'rotate-180' : ''}`} />
            {stats.revenueGrowth ? `${stats.revenueGrowth.toFixed(1)}%` : '0%'} from last month
          </p>
        </div>

        {/* Users Card */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">Active Users</h3>
            <Users className="h-4 w-4 text-indigo-500" />
          </div>
          <div className="mt-2 text-2xl font-bold text-zinc-900 dark:text-white">{stats.activeUsers}</div>
          <p className="text-xs text-zinc-500 mt-1">Total registered users</p>
        </div>

        {/* JVM Stats (Java) */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">JVM Heap Memory</h3>
            <Cpu className="h-4 w-4 text-amber-500" />
          </div>
          <div className="mt-2 text-2xl font-bold text-zinc-900 dark:text-white">312 MB <span className="text-sm text-zinc-500 font-normal">/ 512 MB</span></div>
          <div className="mt-3 h-1.5 w-full rounded-full bg-zinc-100 dark:bg-zinc-800">
            <div className="h-full rounded-full bg-amber-500" style={{ width: '60%' }}></div>
          </div>
        </div>

        {/* Storage Stats */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="flex items-center justify-between">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">Temp Storage</h3>
            <HardDrive className="h-4 w-4 text-rose-500" />
          </div>
          <div className="mt-2 text-2xl font-bold text-zinc-900 dark:text-white">42% Full</div>
          <p className="text-xs text-zinc-500 mt-1">/tmp directory size: 1.2 GB</p>
        </div>
      </div>

      {/* 2. Main Content Grid */}
      <div className="grid gap-6 md:grid-cols-7">

        {/* Chart Section */}
        <div className="col-span-4 rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <h3 className="mb-6 text-lg font-semibold text-zinc-900 dark:text-zinc-100">Files Processed (Last 7 Days)</h3>
          <div className="h-[300px] w-full">
            <ResponsiveContainer width="100%" height="100%">
              <BarChart data={trafficData}>
                <CartesianGrid strokeDasharray="3 3" stroke={chartGridColor} vertical={false} />
                <XAxis dataKey="name" stroke={chartAxisColor} fontSize={12} tickLine={false} axisLine={false} />
                <YAxis stroke={chartAxisColor} fontSize={12} tickLine={false} axisLine={false} />
                <Tooltip
                  cursor={{ fill: isDark ? '#27272a' : '#f4f4f5' }}
                  contentStyle={{ backgroundColor: tooltipBg, border: `1px solid ${tooltipBorder}`, borderRadius: '8px', color: tooltipText }}
                />
                <Bar dataKey="files" fill="#6366f1" radius={[4, 4, 0, 0]} />
              </BarChart>
            </ResponsiveContainer>
          </div>
        </div>

        {/* Recent Logs Section */}
        <div className="col-span-3 rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <h3 className="mb-6 text-lg font-semibold text-zinc-900 dark:text-zinc-100">Recent Admin Activity</h3>
          <div className="space-y-6">
            {[
              { action: "Purged Temp Files", user: "You", time: "2 min ago", color: "bg-amber-500" },
              { action: "Banned User: spambot@gmail.com", user: "You", time: "15 min ago", color: "bg-red-500" },
              { action: "Created Coupon: SAVE20", user: "System", time: "1 hour ago", color: "bg-emerald-500" },
              { action: "Updated Free Tier Limits", user: "You", time: "3 hours ago", color: "bg-blue-500" },
            ].map((log, i) => (
              <div key={i} className="flex items-center gap-4">
                <span className={`h-2 w-2 rounded-full ${log.color}`} />
                <div>
                  <p className="text-sm font-medium text-zinc-700 dark:text-zinc-200">{log.action}</p>
                  <p className="text-xs text-zinc-500">{log.user} • {log.time}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </AdminLayout>
  );
}

--------------------------------------------------
### File: src/pages/admin/Users.jsx
--------------------------------------------------
import React, { useState } from 'react';
import AdminLayout from './AdminLayout';
import { Search, MoreVertical, Shield, ShieldAlert, CheckCircle2, XCircle } from 'lucide-react';



import axios from 'axios';

import { useAuth } from '../../context/AuthContext';

export default function Users() {
  const [searchTerm, setSearchTerm] = useState("");
  const [users, setUsers] = useState([]);
  const [bannedUsers, setBannedUsers] = useState([]);
  const [activeTab, setActiveTab] = useState('users'); // 'users' or 'banned'
  const { token } = useAuth();

  React.useEffect(() => {
    if (token) {
      fetchUsers();
      fetchBannedUsers();
    }
  }, [token]);

  const fetchUsers = async () => {
    try {
      const response = await axios.get('http://localhost:8080/api/admin/users', {
        headers: { Authorization: `Bearer ${token}` }
      });
      setUsers(response.data);
    } catch (error) {
      console.error('Failed to fetch users', error);
    }
  };

  const fetchBannedUsers = async () => {
    try {
      const response = await axios.get('http://localhost:8080/api/admin/users/banned', {
        headers: { Authorization: `Bearer ${token}` }
      });
      setBannedUsers(response.data);
    } catch (error) {
      console.error('Failed to fetch banned users', error);
    }
  };

  const handleBanUser = async (userId) => {
    if (window.confirm('Are you sure you want to ban this user? This action cannot be undone.')) {
      try {
        await axios.post(`http://localhost:8080/api/admin/users/${userId}/ban`, {}, {
          headers: { Authorization: `Bearer ${token}` }
        });
        fetchUsers();
        fetchBannedUsers();
      } catch (error) {
        console.error('Failed to ban user', error);
        alert('Failed to ban user');
      }
    }
  };

  const handleUnbanUser = async (email) => {
    if (window.confirm(`Are you sure you want to unban ${email}? They will be able to register again.`)) {
      try {
        await axios.post(`http://localhost:8080/api/admin/users/unban`, { email }, {
          headers: { Authorization: `Bearer ${token}` }
        });
        fetchBannedUsers();
      } catch (error) {
        console.error('Failed to unban user', error);
        alert('Failed to unban user');
      }
    }
  };

  const handleExportCsv = async () => {
    try {
      const response = await axios.get('http://localhost:8080/api/admin/users/export', {
        headers: { Authorization: `Bearer ${token}` },
        responseType: 'blob',
      });
      const url = window.URL.createObjectURL(new Blob([response.data]));
      const link = document.createElement('a');
      link.href = url;
      link.setAttribute('download', 'users.csv');
      document.body.appendChild(link);
      link.click();
      link.remove();
    } catch (error) {
      console.error('Failed to export CSV', error);
      alert('Failed to export CSV');
    }
  };

  const filteredUsers = users.filter(user =>
    user.email.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const filteredBannedUsers = bannedUsers.filter(user =>
    user.email.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <AdminLayout>
      <div className="flex items-center justify-between mb-6">
        <div>
          <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">User Management</h2>
          <p className="text-zinc-500 dark:text-zinc-400 text-sm">Manage access, roles, and subscription status.</p>
        </div>
        <div className="flex gap-3">
          <div className="relative">
            <Search className="absolute left-3 top-2.5 h-4 w-4 text-zinc-400 dark:text-zinc-500" />
            <input
              type="text"
              placeholder="Search users..."
              className="h-10 w-64 rounded-md border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 pl-9 pr-4 text-sm text-zinc-900 dark:text-zinc-200 focus:border-indigo-500 focus:outline-none shadow-sm"
              onChange={(e) => setSearchTerm(e.target.value)}
            />
          </div>
          <button
            onClick={handleExportCsv}
            className="h-10 rounded-md bg-indigo-600 px-4 text-sm font-medium text-white hover:bg-indigo-700 shadow-sm"
          >
            Export CSV
          </button>
        </div>
      </div>

      <div className="flex gap-4 mb-6 border-b border-zinc-200 dark:border-zinc-800">
        <button
          onClick={() => setActiveTab('users')}
          className={`pb-3 text-sm font-medium transition-colors relative ${activeTab === 'users' ? 'text-zinc-900 dark:text-white' : 'text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300'
            }`}
        >
          Active Users
          {activeTab === 'users' && (
            <div className="absolute bottom-0 left-0 w-full h-0.5 bg-indigo-500 rounded-t-full" />
          )}
        </button>
        <button
          onClick={() => setActiveTab('banned')}
          className={`pb-3 text-sm font-medium transition-colors relative ${activeTab === 'banned' ? 'text-zinc-900 dark:text-white' : 'text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300'
            }`}
        >
          Banned Users
          {activeTab === 'banned' && (
            <div className="absolute bottom-0 left-0 w-full h-0.5 bg-indigo-500 rounded-t-full" />
          )}
        </button>
      </div>

      <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 overflow-hidden shadow-sm">
        <table className="w-full text-left text-sm">
          <thead className="bg-zinc-50 dark:bg-zinc-950/50 text-zinc-500 dark:text-zinc-400">
            <tr>
              <th className="px-6 py-4 font-medium">User</th>
              {activeTab === 'users' && (
                <>
                  <th className="px-6 py-4 font-medium">Role</th>
                  <th className="px-6 py-4 font-medium">Plan</th>
                  <th className="px-6 py-4 font-medium">Status</th>
                  <th className="px-6 py-4 font-medium">Joined</th>
                </>
              )}
              {activeTab === 'banned' && (
                <th className="px-6 py-4 font-medium">Reason</th>
              )}
              <th className="px-6 py-4 font-medium text-right">Actions</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-zinc-200 dark:divide-zinc-800">
            {activeTab === 'users' ? (
              filteredUsers.map((user) => (
                <tr key={user.id} className="group hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
                  <td className="px-6 py-4">
                    <div className="flex flex-col">
                      <span className="font-medium text-zinc-900 dark:text-zinc-200">{user.email}</span>
                      <span className="text-xs text-zinc-500">{user.id}</span>
                    </div>
                  </td>
                  <td className="px-6 py-4">
                    <span className={`inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-medium ${user.role === 'ADMIN' ? 'bg-purple-100 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 border border-purple-200 dark:border-purple-500/20' : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 border border-zinc-200 dark:border-zinc-700'
                      }`}>
                      {user.role === 'ADMIN' && <Shield className="h-3 w-3" />}
                      {user.role}
                    </span>
                  </td>
                  <td className="px-6 py-4">
                    <span className="text-zinc-700 dark:text-zinc-300">{user.plan}</span>
                  </td>
                  <td className="px-6 py-4">
                    <span className={`inline-flex items-center gap-1.5 rounded-full px-2 py-1 text-xs font-medium ${user.active ? 'text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-transparent' : 'text-red-600 dark:text-red-400 bg-red-50 dark:bg-transparent'
                      }`}>
                      {user.active ? <CheckCircle2 className="h-3 w-3" /> : <ShieldAlert className="h-3 w-3" />}
                      {user.active ? 'ACTIVE' : 'INACTIVE'}
                    </span>
                  </td>
                  <td className="px-6 py-4 text-zinc-500">{new Date(user.createdAt).toLocaleDateString()}</td>
                  <td className="px-6 py-4 text-right flex justify-end gap-2">
                    <button
                      onClick={() => handleBanUser(user.id)}
                      className="p-2 text-red-500 hover:text-white hover:bg-red-600 rounded-md transition-colors"
                      title="Ban User"
                    >
                      <ShieldAlert className="h-4 w-4" />
                    </button>
                  </td>
                </tr>
              ))
            ) : (
              filteredBannedUsers.map((user) => (
                <tr key={user.id} className="group hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
                  <td className="px-6 py-4">
                    <span className="font-medium text-zinc-900 dark:text-zinc-200">{user.email}</span>
                  </td>
                  <td className="px-6 py-4 text-zinc-500 dark:text-zinc-400">
                    {user.reason || 'Banned by Admin'}
                  </td>
                  <td className="px-6 py-4 text-right flex justify-end gap-2">
                    <button
                      onClick={() => handleUnbanUser(user.email)}
                      className="p-2 text-emerald-500 hover:text-white hover:bg-emerald-600 rounded-md transition-colors"
                      title="Unban User"
                    >
                      <CheckCircle2 className="h-4 w-4" />
                    </button>
                  </td>
                </tr>
              ))
            )}
          </tbody>
        </table>
      </div>
    </AdminLayout>
  );
}

--------------------------------------------------
### File: src/pages/admin/Plans.jsx
--------------------------------------------------
import React, { useState, useEffect } from 'react';
import AdminLayout from './AdminLayout';
import { Save, AlertCircle, Check, Loader2 } from 'lucide-react';
import axios from 'axios';
import { useAuth } from '../../context/AuthContext';

export default function Plans() {
  const [loading, setLoading] = useState(false);
  const [saved, setSaved] = useState(false);
  const [initialLoading, setInitialLoading] = useState(true);
  const [error, setError] = useState(null);
  const { user, token } = useAuth();

  // Free Tier Config
  const [freeMaxFileSize, setFreeMaxFileSize] = useState(10);
  const [freeDailyLimit, setFreeDailyLimit] = useState(3);
  const [freeAllowCompression, setFreeAllowCompression] = useState(true);

  // Pro Tier Config
  const [proMaxFileSize, setProMaxFileSize] = useState(100);
  const [proPriorityProcessing, setProPriorityProcessing] = useState(true);

  useEffect(() => {
    if (token) {
      fetchConfig();
    }
  }, [token]);

  const fetchConfig = async () => {
    try {
      setInitialLoading(true);
      setError(null);
      const response = await axios.get('http://localhost:8080/api/admin/config', {
        headers: { Authorization: `Bearer ${token}` }
      });
      const configs = response.data;

      // Map config values to state
      configs.forEach(config => {
        switch (config.configKey) {
          case 'FREE_TIER_LIMIT':
            setFreeDailyLimit(parseInt(config.configValue) || 3);
            break;
          case 'FREE_MAX_FILE_SIZE':
            setFreeMaxFileSize(parseInt(config.configValue) || 10);
            break;
          case 'FREE_ALLOW_COMPRESSION':
            setFreeAllowCompression(config.configValue === 'true');
            break;
          case 'PRO_MAX_FILE_SIZE':
            setProMaxFileSize(parseInt(config.configValue) || 100);
            break;
          case 'PRO_PRIORITY_PROCESSING':
            setProPriorityProcessing(config.configValue === 'true');
            break;
          default:
            break;
        }
      });
    } catch (error) {
      console.error('Failed to fetch config', error);
      setError('Failed to load configuration. Please check if the backend is running.');
    } finally {
      setInitialLoading(false);
    }
  };

  const saveConfig = async (key, value) => {
    try {
      await axios.post('http://localhost:8080/api/admin/config', {
        configKey: key,
        configValue: value.toString()
      }, {
        headers: { Authorization: `Bearer ${token}` }
      });
    } catch (error) {
      console.error(`Failed to save ${key}`, error);
      throw error;
    }
  };

  const handleSave = async () => {
    setLoading(true);
    setError(null);
    try {
      // Save all configurations
      await Promise.all([
        saveConfig('FREE_TIER_LIMIT', freeDailyLimit),
        saveConfig('FREE_MAX_FILE_SIZE', freeMaxFileSize),
        saveConfig('FREE_ALLOW_COMPRESSION', freeAllowCompression),
        saveConfig('PRO_MAX_FILE_SIZE', proMaxFileSize),
        saveConfig('PRO_PRIORITY_PROCESSING', proPriorityProcessing),
      ]);

      setSaved(true);
      setTimeout(() => setSaved(false), 2000);
    } catch (error) {
      console.error('Failed to save config', error);
      setError('Failed to save changes. Please ensure you have admin permissions and the backend is running.');
    } finally {
      setLoading(false);
    }
  };

  if (initialLoading) {
    return (
      <AdminLayout>
        <div className="flex items-center justify-center h-64">
          <Loader2 className="h-8 w-8 animate-spin text-indigo-500" />
        </div>
      </AdminLayout>
    );
  }

  return (
    <AdminLayout>
      <div className="flex items-center justify-between mb-8">
        <div>
          <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">Plans & Configuration</h2>
          <p className="text-zinc-500 dark:text-zinc-400 text-sm">Configure limits for Free and Pro tiers dynamically.</p>
        </div>
        <button
          onClick={handleSave}
          disabled={loading}
          className="flex items-center gap-2 h-10 rounded-md bg-indigo-600 px-6 text-sm font-medium text-white hover:bg-indigo-700 disabled:opacity-50 transition-all shadow-sm"
        >
          {loading ? (
            <><Loader2 className="h-4 w-4 animate-spin" /> Saving...</>
          ) : saved ? (
            <><Check className="h-4 w-4" /> Saved</>
          ) : (
            <><Save className="h-4 w-4" /> Save Changes</>
          )}
        </button>
      </div>

      {/* Error Banner */}
      {error && (
        <div className="mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-center gap-3">
          <AlertCircle className="h-5 w-5 text-red-500 flex-shrink-0" />
          <p className="text-sm text-red-700 dark:text-red-400">{error}</p>
          <button
            onClick={() => setError(null)}
            className="ml-auto text-red-500 hover:text-red-700 dark:hover:text-red-300"
          >
            ×
          </button>
        </div>
      )}

      {/* Success Banner */}
      {saved && (
        <div className="mb-6 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 flex items-center gap-3">
          <Check className="h-5 w-5 text-green-500 flex-shrink-0" />
          <p className="text-sm text-green-700 dark:text-green-400">Configuration saved successfully! Changes will be reflected on the Pricing page and Homepage.</p>
        </div>
      )}

      <div className="grid gap-8 md:grid-cols-2">
        {/* FREE TIER CONFIG */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="mb-6 flex items-center justify-between">
            <h3 className="text-lg font-semibold text-zinc-900 dark:text-white">Free Tier Limits</h3>
            <span className="rounded-full bg-zinc-100 dark:bg-zinc-800 px-3 py-1 text-xs font-medium text-zinc-600 dark:text-zinc-400">Default</span>
          </div>

          <div className="space-y-6">
            <div className="space-y-2">
              <label className="text-sm font-medium text-zinc-700 dark:text-zinc-300">Max File Size (MB)</label>
              <input
                type="number"
                value={freeMaxFileSize}
                onChange={(e) => setFreeMaxFileSize(parseInt(e.target.value) || 10)}
                min="1"
                max="50"
                className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
              />
              <p className="text-xs text-zinc-500">Files larger than this will be rejected.</p>
            </div>

            <div className="space-y-2">
              <label className="text-sm font-medium text-zinc-700 dark:text-zinc-300">Daily Operations Limit</label>
              <input
                type="number"
                value={freeDailyLimit}
                onChange={(e) => setFreeDailyLimit(parseInt(e.target.value) || 3)}
                min="1"
                max="100"
                className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
              />
              <p className="text-xs text-zinc-500">Maximum operations per day for free users.</p>
            </div>

            <div className="flex items-center justify-between rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-950 p-4">
              <div>
                <p className="text-sm font-medium text-zinc-900 dark:text-zinc-200">Allow Compression</p>
                <p className="text-xs text-zinc-500">CPU intensive task</p>
              </div>
              <label className="relative inline-flex cursor-pointer items-center">
                <input
                  type="checkbox"
                  checked={freeAllowCompression}
                  onChange={(e) => setFreeAllowCompression(e.target.checked)}
                  className="peer sr-only"
                />
                <div className="peer h-6 w-11 rounded-full bg-zinc-200 dark:bg-zinc-700 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-all after:content-[''] peer-checked:bg-indigo-600 peer-checked:after:translate-x-full peer-focus:outline-none"></div>
              </label>
            </div>
          </div>
        </div>

        {/* PRO TIER CONFIG */}
        <div className="rounded-xl border border-amber-200 dark:border-amber-500/20 bg-white dark:bg-zinc-900 p-6 relative overflow-hidden shadow-sm">
          <div className="absolute top-0 right-0 p-4 opacity-10">
            <AlertCircle className="h-24 w-24 text-amber-500" />
          </div>
          <div className="mb-6 flex items-center justify-between relative z-10">
            <h3 className="text-lg font-semibold text-zinc-900 dark:text-white">Pro Tier Limits</h3>
            <span className="rounded-full bg-amber-100 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20 px-3 py-1 text-xs font-medium text-amber-600 dark:text-amber-500">Premium</span>
          </div>

          <div className="space-y-6 relative z-10">
            <div className="space-y-2">
              <label className="text-sm font-medium text-zinc-700 dark:text-zinc-300">Max File Size (MB)</label>
              <input
                type="number"
                value={proMaxFileSize}
                onChange={(e) => setProMaxFileSize(parseInt(e.target.value) || 100)}
                min="10"
                max="500"
                className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
              />
              <p className="text-xs text-zinc-500">Maximum file size for Pro users.</p>
            </div>

            <div className="space-y-2">
              <label className="text-sm font-medium text-zinc-700 dark:text-zinc-300">Daily Operations Limit</label>
              <input
                type="text"
                disabled
                value="Unlimited"
                className="w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-950/50 px-3 py-2 text-sm text-zinc-500 cursor-not-allowed shadow-sm"
              />
              <p className="text-xs text-zinc-500">Pro users have unlimited daily operations.</p>
            </div>

            <div className="flex items-center justify-between rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-950 p-4">
              <div>
                <p className="text-sm font-medium text-zinc-900 dark:text-zinc-200">Priority Processing</p>
                <p className="text-xs text-zinc-500">Faster queue processing for Pro users</p>
              </div>
              <label className="relative inline-flex cursor-pointer items-center">
                <input
                  type="checkbox"
                  checked={proPriorityProcessing}
                  onChange={(e) => setProPriorityProcessing(e.target.checked)}
                  className="peer sr-only"
                />
                <div className="peer h-6 w-11 rounded-full bg-zinc-200 dark:bg-zinc-700 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-all after:content-[''] peer-checked:bg-amber-600 peer-checked:after:translate-x-full peer-focus:outline-none"></div>
              </label>
            </div>
          </div>
        </div>
      </div>
    </AdminLayout>
  );
}

--------------------------------------------------
### File: src/pages/admin/Coupons.jsx
--------------------------------------------------
import React, { useState, useEffect } from 'react';
import AdminLayout from './AdminLayout';
import { Ticket, Plus, Trash2, Loader2, AlertTriangle, X } from 'lucide-react';
import axios from 'axios';

// CRITICAL: Function to retrieve the Authorization Headers
const getAuthHeaders = () => ({
    headers: {
        Authorization: `Bearer ${localStorage.getItem('pdfly_auth_token')}`
    }
});

const API_URL = "http://localhost:8080/api/admin/coupons";

export default function Coupons() {
    const [coupons, setCoupons] = useState([]);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);
    const [isModalOpen, setIsModalOpen] = useState(false);
    const [deletingId, setDeletingId] = useState(null);
    const [newCoupon, setNewCoupon] = useState({
        code: '',
        discountPercent: 0,
        planType: 'PRO',
        maxUses: 100,
        expiryDate: new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString().split('T')[0] // 1 year default
    });

    const fetchCoupons = async () => {
        setLoading(true);
        try {
            const response = await axios.get(API_URL, getAuthHeaders());
            setCoupons(response.data);
            setError(null);
        } catch (err) {
            if (err.response?.status === 403 || err.response?.status === 401) {
                setError("Authentication failed. Please log in as Admin.");
            } else {
                setError("Failed to fetch coupons. Check server connection.");
            }
            console.error(err);
        } finally {
            setLoading(false);
        }
    };

    useEffect(() => {
        fetchCoupons();
    }, []);

    const handleCreateCoupon = async (e) => {
        e.preventDefault();
        setLoading(true);
        setError(null);

        if (!newCoupon.code || newCoupon.maxUses <= 0 || !newCoupon.planType) {
            setError("Please fill all required fields correctly.");
            setLoading(false);
            return;
        }

        try {
            const now = new Date();
            const expiryDateTime = newCoupon.expiryDate + 'T' + now.toTimeString().split(' ')[0];

            await axios.post(API_URL, {
                ...newCoupon,
                expiryDate: expiryDateTime
            }, getAuthHeaders());

            // Reset form
            setNewCoupon({
                code: '',
                discountPercent: 0,
                planType: 'PRO',
                maxUses: 100,
                expiryDate: new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString().split('T')[0]
            });

            await fetchCoupons(); // Refresh the list
            setIsModalOpen(false); // Close modal on success
        } catch (err) {
            if (err.response?.status === 409) {
                setError("Coupon code already exists.");
            } else if (err.response?.status === 400) {
                setError(err.response?.data?.message || "Invalid data. Please check your inputs.");
            } else {
                setError("Creation failed. Are you logged in as Admin?");
            }
        } finally {
            setLoading(false);
        }
    };

    const handleDeleteCoupon = async (id) => {
        if (!window.confirm("Are you sure you want to delete this coupon? This action cannot be undone.")) {
            return;
        }

        setDeletingId(id);
        try {
            await axios.delete(`${API_URL}/${id}`, getAuthHeaders());
            await fetchCoupons(); // Refresh the list
        } catch (err) {
            setError("Failed to delete coupon. Please try again.");
            console.error(err);
        } finally {
            setDeletingId(null);
        }
    };

    const getStatus = (coupon) => {
        const isExpired = new Date(coupon.expiryDate) < new Date();
        const limitReached = coupon.currentUses >= coupon.maxUses;

        if (limitReached) return { text: "LIMIT REACHED", color: "text-amber-400 bg-amber-400/10 border-amber-400/20" };
        if (isExpired) return { text: "EXPIRED", color: "text-zinc-500 bg-zinc-500/10 border-zinc-700" };
        return { text: "ACTIVE", color: "text-emerald-400 bg-emerald-400/10 border-emerald-400/20" };
    };

    if (loading && coupons.length === 0) {
        return (
            <AdminLayout>
                <div className="text-center text-zinc-500 dark:text-zinc-400 py-10">
                    <Loader2 className="h-8 w-8 animate-spin mx-auto mb-4" />
                    Loading Coupons...
                </div>
            </AdminLayout>
        );
    }

    return (
        <AdminLayout>
            <div className="flex items-center justify-between mb-6">
                <div>
                    <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">Coupon Manager</h2>
                    <p className="text-zinc-500 dark:text-zinc-400 text-sm">Create and track marketing campaigns.</p>
                </div>
                <button
                    onClick={() => setIsModalOpen(true)}
                    className="flex items-center gap-2 h-10 rounded-md bg-indigo-600 px-4 text-sm font-medium text-white hover:bg-indigo-700 transition-colors shadow-sm"
                >
                    <Plus className="h-4 w-4" /> Create New Coupon
                </button>
            </div>

            {error && (
                <div className="text-red-600 dark:text-red-500 text-sm p-3 rounded-lg border border-red-200 dark:border-red-500/20 bg-red-50 dark:bg-red-500/10 mb-4 flex items-center gap-2">
                    <AlertTriangle className="h-4 w-4" /> {error}
                </div>
            )}

            {coupons.length === 0 && !loading ? (
                <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-12 text-center shadow-sm">
                    <Ticket className="h-12 w-12 text-zinc-400 dark:text-zinc-600 mx-auto mb-4" />
                    <p className="text-zinc-500 dark:text-zinc-400">No coupons found. Create your first coupon to get started.</p>
                </div>
            ) : (
                <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 overflow-hidden shadow-sm">
                    <table className="w-full text-left text-sm">
                        <thead className="bg-zinc-50 dark:bg-zinc-950/50 text-zinc-500 dark:text-zinc-400">
                            <tr>
                                <th className="px-6 py-4 font-medium">Code</th>
                                <th className="px-6 py-4 font-medium">Discount</th>
                                <th className="px-6 py-4 font-medium">Plan</th>
                                <th className="px-6 py-4 font-medium">Usage</th>
                                <th className="px-6 py-4 font-medium">Expires</th>
                                <th className="px-6 py-4 font-medium text-right">Status</th>
                                <th className="px-6 py-4 font-medium text-right">Actions</th>
                            </tr>
                        </thead>
                        <tbody className="divide-y divide-zinc-200 dark:divide-zinc-800">
                            {coupons.map((coupon) => {
                                const status = getStatus(coupon);
                                return (
                                    <tr key={coupon.id} className="group hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
                                        <td className="px-6 py-4">
                                            <span className="font-mono font-bold text-zinc-900 dark:text-zinc-200 tracking-wide">{coupon.code}</span>
                                        </td>
                                        <td className="px-6 py-4 text-zinc-700 dark:text-zinc-300 font-medium">{coupon.discountPercent}%</td>
                                        <td className="px-6 py-4 text-zinc-700 dark:text-zinc-300 font-medium">{coupon.planType}</td>
                                        <td className="px-6 py-4 text-zinc-500 dark:text-zinc-400">{coupon.currentUses} / {coupon.maxUses}</td>
                                        <td className="px-6 py-4 text-zinc-500">{new Date(coupon.expiryDate).toLocaleDateString()}</td>
                                        <td className="px-6 py-4 text-right">
                                            <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium border ${status.text === "LIMIT REACHED" ? "text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-400/10 border-amber-200 dark:border-amber-400/20" :
                                                    status.text === "EXPIRED" ? "text-zinc-600 dark:text-zinc-500 bg-zinc-100 dark:bg-zinc-500/10 border-zinc-200 dark:border-zinc-700" :
                                                        "text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-400/10 border-emerald-200 dark:border-emerald-400/20"
                                                }`}>
                                                {status.text}
                                            </span>
                                        </td>
                                        <td className="px-6 py-4 text-right">
                                            <button
                                                onClick={() => handleDeleteCoupon(coupon.id)}
                                                disabled={deletingId === coupon.id}
                                                className="inline-flex items-center gap-1 text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300 transition-colors disabled:opacity-50"
                                            >
                                                {deletingId === coupon.id ? (
                                                    <Loader2 className="h-4 w-4 animate-spin" />
                                                ) : (
                                                    <Trash2 className="h-4 w-4" />
                                                )}
                                                <span className="text-xs">Delete</span>
                                            </button>
                                        </td>
                                    </tr>
                                );
                            })}
                        </tbody>
                    </table>
                </div>
            )}

            {/* --- CREATE COUPON MODAL --- */}
            {isModalOpen && (
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm" onClick={() => setIsModalOpen(false)}>
                    <div className="w-full max-w-lg rounded-xl border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 p-8 shadow-2xl" onClick={(e) => e.stopPropagation()}>
                        <div className="flex items-center justify-between border-b border-zinc-200 dark:border-zinc-800 pb-4 mb-6">
                            <h3 className="text-xl font-semibold text-zinc-900 dark:text-white">Create New Coupon</h3>
                            <button
                                onClick={() => setIsModalOpen(false)}
                                className="text-zinc-500 hover:text-zinc-700 dark:hover:text-white p-1 transition-colors"
                            >
                                <X className="h-5 w-5" />
                            </button>
                        </div>

                        <form onSubmit={handleCreateCoupon} className="space-y-4">
                            {error && (
                                <div className="text-red-600 dark:text-red-500 text-sm mb-3 flex items-center gap-2">
                                    <AlertTriangle className="h-4 w-4" />
                                    {error}
                                </div>
                            )}

                            <div className="grid grid-cols-2 gap-4">
                                <div className="space-y-2">
                                    <label className="text-sm font-medium text-zinc-700 dark:text-zinc-400">Code (e.g., STUDENT50)</label>
                                    <input
                                        type="text"
                                        value={newCoupon.code}
                                        onChange={(e) => setNewCoupon({ ...newCoupon, code: e.target.value.toUpperCase() })}
                                        required
                                        className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
                                        placeholder="STUDENT50"
                                    />
                                </div>
                                <div className="space-y-2">
                                    <label className="text-sm font-medium text-zinc-700 dark:text-zinc-400">Discount (%)</label>
                                    <input
                                        type="number"
                                        value={newCoupon.discountPercent}
                                        onChange={(e) => setNewCoupon({ ...newCoupon, discountPercent: parseInt(e.target.value) || 0 })}
                                        min="0"
                                        max="100"
                                        required
                                        className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
                                    />
                                </div>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div className="space-y-2">
                                    <label className="text-sm font-medium text-zinc-700 dark:text-zinc-400">Plan Granted</label>
                                    <select
                                        value={newCoupon.planType}
                                        onChange={(e) => setNewCoupon({ ...newCoupon, planType: e.target.value })}
                                        required
                                        className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
                                    >
                                        <option value="PRO">PRO</option>
                                        <option value="FREE">FREE</option>
                                    </select>
                                </div>
                                <div className="space-y-2">
                                    <label className="text-sm font-medium text-zinc-700 dark:text-zinc-400">Max Uses</label>
                                    <input
                                        type="number"
                                        value={newCoupon.maxUses}
                                        onChange={(e) => setNewCoupon({ ...newCoupon, maxUses: parseInt(e.target.value) || 1 })}
                                        min="1"
                                        required
                                        className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
                                    />
                                </div>
                            </div>

                            <div className="space-y-2">
                                <label className="text-sm font-medium text-zinc-700 dark:text-zinc-400">Expiry Date</label>
                                <input
                                    type="date"
                                    value={newCoupon.expiryDate}
                                    onChange={(e) => setNewCoupon({ ...newCoupon, expiryDate: e.target.value })}
                                    required
                                    className="w-full rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
                                />
                            </div>

                            <div className="flex justify-end pt-4 gap-3">
                                <button
                                    type="button"
                                    onClick={() => setIsModalOpen(false)}
                                    className="rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800 px-4 py-2 text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors shadow-sm"
                                >
                                    Cancel
                                </button>
                                <button
                                    type="submit"
                                    disabled={loading}
                                    className="flex items-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-sm text-white hover:bg-indigo-700 disabled:opacity-50 transition-colors shadow-sm"
                                >
                                    {loading && <Loader2 className="h-4 w-4 animate-spin" />}
                                    Create Coupon
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            )}
        </AdminLayout>
    );
}


--------------------------------------------------
### File: src/pages/admin/Finance.jsx
--------------------------------------------------
import React from 'react';
import AdminLayout from './AdminLayout';
import { Download, IndianRupee, ArrowUpRight, ArrowDownRight, CreditCard, MoreHorizontal } from 'lucide-react';

const TRANSACTIONS = [
  { id: "INV-001", user: "sarah@skynet.com", amount: "₹999.00", date: "Today, 10:42 AM", status: "SUCCESS" },
  { id: "INV-002", user: "john.doe@gmail.com", amount: "₹499.00", date: "Today, 09:15 AM", status: "SUCCESS" },
  { id: "INV-003", user: "alice@agency.com", amount: "₹1,999.00", date: "Yesterday, 4:30 PM", status: "FAILED" },
  { id: "INV-004", user: "bob@builder.com", amount: "₹999.00", date: "Yesterday, 2:15 PM", status: "REFUNDED" },
  { id: "INV-005", user: "admin@corp.com", amount: "₹4,999.00", date: "Nov 24, 2025", status: "SUCCESS" },
];

export default function Finance() {
  return (
    <AdminLayout>
      <div className="flex items-center justify-between mb-6">
        <div>
          <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">Transactions & Revenue</h2>
          <p className="text-zinc-500 dark:text-zinc-400 text-sm">Monitor incoming payments and handle refunds.</p>
        </div>
        <button className="flex items-center gap-2 h-10 rounded-md bg-white dark:bg-zinc-800 px-4 text-sm font-medium text-zinc-700 dark:text-zinc-200 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors border border-zinc-200 dark:border-zinc-700 shadow-sm">
          <Download className="h-4 w-4" /> Export CSV
        </button>
      </div>

      <div className="grid gap-6 md:grid-cols-4 mb-8">
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="text-zinc-500 dark:text-zinc-400 text-xs font-bold uppercase tracking-wider">Gross Revenue</div>
          <div className="text-2xl font-bold text-zinc-900 dark:text-white mt-2 flex items-center">
            <IndianRupee className="h-5 w-5 mr-1" /> 45,231
          </div>
          <span className="text-xs text-emerald-500 dark:text-emerald-400 flex items-center mt-1"><ArrowUpRight className="h-3 w-3 mr-1" /> 12% vs last month</span>
        </div>
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="text-zinc-500 dark:text-zinc-400 text-xs font-bold uppercase tracking-wider">Net Revenue</div>
          <div className="text-2xl font-bold text-zinc-900 dark:text-white mt-2 flex items-center">
            <IndianRupee className="h-5 w-5 mr-1" /> 38,450
          </div>
          <span className="text-xs text-zinc-500 mt-1">After fees & refunds</span>
        </div>
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="text-zinc-500 dark:text-zinc-400 text-xs font-bold uppercase tracking-wider">Failed Payments</div>
          <div className="text-2xl font-bold text-zinc-900 dark:text-white mt-2">12</div>
          <span className="text-xs text-red-500 dark:text-red-400 flex items-center mt-1"><ArrowDownRight className="h-3 w-3 mr-1" /> Action required</span>
        </div>
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="text-zinc-500 dark:text-zinc-400 text-xs font-bold uppercase tracking-wider">Avg Order Value</div>
          <div className="text-2xl font-bold text-zinc-900 dark:text-white mt-2 flex items-center">
            <IndianRupee className="h-5 w-5 mr-1" /> 850
          </div>
        </div>
      </div>

      <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 overflow-hidden shadow-sm">
        <table className="w-full text-left text-sm">
          <thead className="bg-zinc-50 dark:bg-zinc-950/50 text-zinc-500 dark:text-zinc-400">
            <tr>
              <th className="px-6 py-4 font-medium">Invoice ID</th>
              <th className="px-6 py-4 font-medium">User</th>
              <th className="px-6 py-4 font-medium">Amount</th>
              <th className="px-6 py-4 font-medium">Date</th>
              <th className="px-6 py-4 font-medium">Status</th>
              <th className="px-6 py-4 font-medium text-right">Actions</th>
            </tr>
          </thead>
          <tbody className="divide-y divide-zinc-200 dark:divide-zinc-800">
            {TRANSACTIONS.map((tx) => (
              <tr key={tx.id} className="group hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
                <td className="px-6 py-4 font-mono text-zinc-600 dark:text-zinc-300">{tx.id}</td>
                <td className="px-6 py-4 text-zinc-600 dark:text-zinc-300">{tx.user}</td>
                <td className="px-6 py-4 font-medium text-zinc-900 dark:text-white">{tx.amount}</td>
                <td className="px-6 py-4 text-zinc-500">{tx.date}</td>
                <td className="px-6 py-4">
                  <span className={`inline-flex items-center gap-1.5 rounded-full px-2 py-1 text-xs font-medium ${tx.status === 'SUCCESS' ? 'text-emerald-600 dark:text-emerald-400 bg-emerald-100 dark:bg-emerald-400/10' :
                      tx.status === 'FAILED' ? 'text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-400/10' :
                        'text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-400/10'
                    }`}>
                    <span className={`h-1.5 w-1.5 rounded-full ${tx.status === 'SUCCESS' ? 'bg-emerald-500 dark:bg-emerald-400' :
                        tx.status === 'FAILED' ? 'bg-red-500 dark:bg-red-400' : 'bg-zinc-500 dark:bg-zinc-400'
                      }`} />
                    {tx.status}
                  </span>
                </td>
                <td className="px-6 py-4 text-right">
                  <button className="p-2 text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md transition-colors">
                    <MoreHorizontal className="h-4 w-4" />
                  </button>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </AdminLayout>
  );
}

--------------------------------------------------
### File: src/pages/admin/Health.jsx
--------------------------------------------------
import React from 'react';
import AdminLayout from './AdminLayout';
import { Activity, Cpu, HardDrive, Trash2, RefreshCw } from 'lucide-react';
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

// Mock live data for the chart
const MEMORY_DATA = [
  { time: '10:00', usage: 120 }, { time: '10:05', usage: 140 },
  { time: '10:10', usage: 180 }, { time: '10:15', usage: 160 },
  { time: '10:20', usage: 250 }, { time: '10:25', usage: 310 }, // Spike!
  { time: '10:30', usage: 280 }, { time: '10:35', usage: 240 },
];

import { useTheme } from 'next-themes';

export default function Health() {
  const { theme } = useTheme();
  const isDark = theme === 'dark';
  const chartGridColor = isDark ? "#27272a" : "#e4e4e7";
  const chartAxisColor = isDark ? "#71717a" : "#a1a1aa";
  const tooltipBg = isDark ? "#18181b" : "#ffffff";
  const tooltipBorder = isDark ? "#27272a" : "#e4e4e7";
  const tooltipText = isDark ? "#fff" : "#000";

  return (
    <AdminLayout>
      <div className="flex items-center justify-between mb-8">
        <div>
          <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">System Health</h2>
          <p className="text-zinc-500 dark:text-zinc-400 text-sm">Real-time server metrics and resource management.</p>
        </div>
        <div className="flex items-center gap-2">
          <div className="flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-100 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 text-emerald-600 dark:text-emerald-400 text-xs font-medium animate-pulse">
            <Activity className="h-3 w-3" /> System Operational
          </div>
          <button className="p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md transition-colors">
            <RefreshCw className="h-4 w-4" />
          </button>
        </div>
      </div>

      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8">
        {/* JVM HEAP CARD */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 relative overflow-hidden shadow-sm">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">JVM Heap Memory</h3>
            <Cpu className="h-4 w-4 text-amber-500" />
          </div>
          <div className="text-3xl font-bold text-zinc-900 dark:text-white mb-2">312 MB</div>
          <div className="w-full bg-zinc-100 dark:bg-zinc-800 h-2 rounded-full mb-2">
            <div className="bg-amber-500 h-full rounded-full" style={{ width: '60%' }}></div>
          </div>
          <p className="text-xs text-zinc-500">Render Limit: 512 MB</p>
        </div>

        {/* DISK USAGE CARD */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">Temp Storage (/tmp)</h3>
            <HardDrive className="h-4 w-4 text-rose-500" />
          </div>
          <div className="text-3xl font-bold text-zinc-900 dark:text-white mb-2">1.2 GB</div>
          <div className="w-full bg-zinc-100 dark:bg-zinc-800 h-2 rounded-full mb-2">
            <div className="bg-rose-500 h-full rounded-full" style={{ width: '42%' }}></div>
          </div>
          <div className="flex justify-between items-center mt-4">
            <p className="text-xs text-zinc-500">Auto-clears every 1h</p>
            <button className="text-xs flex items-center gap-1 text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300 transition-colors">
              <Trash2 className="h-3 w-3" /> Purge Now
            </button>
          </div>
        </div>

        {/* ACTIVE THREADS */}
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-sm font-medium text-zinc-500 dark:text-zinc-400">Active Threads</h3>
            <Activity className="h-4 w-4 text-indigo-500" />
          </div>
          <div className="text-3xl font-bold text-zinc-900 dark:text-white mb-2">18</div>
          <p className="text-xs text-zinc-500">SpringBoot Worker Threads</p>
        </div>
      </div>

      {/* Chart Section */}
      <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
        <h3 className="text-lg font-semibold text-zinc-900 dark:text-white mb-6">Memory Usage (Last 30 Mins)</h3>
        <div className="h-[300px] w-full">
          <ResponsiveContainer width="100%" height="100%">
            <LineChart data={MEMORY_DATA}>
              <CartesianGrid strokeDasharray="3 3" stroke={chartGridColor} vertical={false} />
              <XAxis dataKey="time" stroke={chartAxisColor} fontSize={12} tickLine={false} axisLine={false} />
              <YAxis stroke={chartAxisColor} fontSize={12} tickLine={false} axisLine={false} />
              <Tooltip
                cursor={{ stroke: isDark ? '#27272a' : '#e4e4e7' }}
                contentStyle={{ backgroundColor: tooltipBg, border: `1px solid ${tooltipBorder}`, borderRadius: '8px', color: tooltipText }}
              />
              <Line type="monotone" dataKey="usage" stroke="#f59e0b" strokeWidth={2} dot={false} activeDot={{ r: 6 }} />
            </LineChart>
          </ResponsiveContainer>
        </div>
      </div>
    </AdminLayout>
  );
}

--------------------------------------------------
### File: src/pages/admin/Security.jsx
--------------------------------------------------
import React, { useState, useEffect } from 'react';
import AdminLayout from './AdminLayout';
import { ShieldAlert, Lock, Unlock, AlertTriangle, FileText, XCircle } from 'lucide-react';
import axios from 'axios';
import { useAuth } from '../../context/AuthContext';

export default function Security() {
  const [maintenance, setMaintenance] = useState(false);
  const [disableSignups, setDisableSignups] = useState(false);
  const [disableCompression, setDisableCompression] = useState(false);
  const [newIp, setNewIp] = useState("");
  const [blockedIps, setBlockedIps] = useState(() => {
    const saved = localStorage.getItem('pdfly_blocked_ips');
    return saved ? JSON.parse(saved) : [
      { ip: "203.0.113.45", date: "2 days ago" },
      { ip: "198.51.100.2", date: "5 hours ago" }
    ];
  });
  const { token } = useAuth();

  useEffect(() => {
    localStorage.setItem('pdfly_blocked_ips', JSON.stringify(blockedIps));
  }, [blockedIps]);

  const handleBlockIp = () => {
    if (newIp && !blockedIps.find(i => i.ip === newIp)) {
      setBlockedIps([{ ip: newIp, date: "Just now" }, ...blockedIps]);
      setNewIp("");
    }
  };

  const handleUnblockIp = (ip) => {
    setBlockedIps(blockedIps.filter(i => i.ip !== ip));
  };

  useEffect(() => {
    if (token) {
      fetchConfig();
    }
  }, [token]);

  const fetchConfig = async () => {
    try {
      const response = await axios.get('http://localhost:8080/api/admin/config', {
        headers: { Authorization: `Bearer ${token}` }
      });
      const configs = response.data;
      const signupConfig = configs.find(c => c.configKey === 'DISABLE_SIGNUPS');
      if (signupConfig) setDisableSignups(signupConfig.configValue === 'true');

      const compressConfig = configs.find(c => c.configKey === 'DISABLE_COMPRESSION');
      if (compressConfig) setDisableCompression(compressConfig.configValue === 'true');

    } catch (error) {
      console.error("Failed to fetch config", error);
    }
  };

  const updateConfig = async (key, value) => {
    try {
      await axios.post('http://localhost:8080/api/admin/config', {
        configKey: key,
        configValue: value.toString()
      }, {
        headers: { Authorization: `Bearer ${token}` }
      });
    } catch (error) {
      console.error(`Failed to update ${key}`, error);
    }
  };

  const handleSignupToggle = () => {
    const newValue = !disableSignups;
    setDisableSignups(newValue);
    updateConfig('DISABLE_SIGNUPS', newValue);
  };

  const handleCompressionToggle = () => {
    const newValue = !disableCompression;
    setDisableCompression(newValue);
    updateConfig('DISABLE_COMPRESSION', newValue);
  };

  return (
    <AdminLayout>
      <div className="flex items-center justify-between mb-8">
        <div>
          <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">Security & Logs</h2>
          <p className="text-zinc-500 dark:text-zinc-400 text-sm">Audit trail and global access controls.</p>
        </div>
        <div className="flex items-center gap-3">
          <button
            onClick={() => setMaintenance(!maintenance)}
            className={`flex items-center gap-2 h-10 rounded-md px-4 text-sm font-medium transition-colors ${maintenance ? 'bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400 border border-red-200 dark:border-red-500/50' : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 border border-zinc-200 dark:border-zinc-700'
              }`}
          >
            {maintenance ? <Lock className="h-4 w-4" /> : <Unlock className="h-4 w-4" />}
            {maintenance ? 'Maintenance Mode ON' : 'Maintenance Mode OFF'}
          </button>
        </div>
      </div>

      <div className="grid gap-6 md:grid-cols-2 mb-8">
        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <h3 className="text-lg font-semibold text-zinc-900 dark:text-white mb-4 flex items-center gap-2">
            <ShieldAlert className="h-5 w-5 text-indigo-500" /> IP Blacklist
          </h3>
          <div className="flex gap-2 mb-4">
            <input
              type="text"
              value={newIp}
              onChange={(e) => setNewIp(e.target.value)}
              placeholder="Enter IP Address (e.g. 192.168.1.1)"
              className="flex-1 rounded-md border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-white focus:border-indigo-500 focus:outline-none shadow-sm"
            />
            <button
              onClick={handleBlockIp}
              className="bg-indigo-600 hover:bg-indigo-700 text-white px-4 rounded-md text-sm font-medium shadow-sm"
            >
              Block
            </button>
          </div>
          <div className="space-y-2 max-h-[200px] overflow-y-auto">
            {blockedIps.map((ipData, index) => (
              <div key={index} className="flex items-center justify-between p-3 rounded-md bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 text-sm group">
                <span className="text-zinc-700 dark:text-zinc-300 font-mono">{ipData.ip}</span>
                <div className="flex items-center gap-3">
                  <span className="text-xs text-zinc-500">Blocked {ipData.date}</span>
                  <button
                    onClick={() => handleUnblockIp(ipData.ip)}
                    className="text-zinc-400 hover:text-red-500 dark:text-zinc-600 dark:hover:text-red-500 transition-colors relative"
                    title="Unblock User"
                  >
                    <XCircle className="h-4 w-4" />
                    <span className="absolute bottom-full right-0 mb-2 w-max px-2 py-1 text-xs text-white bg-zinc-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                      Unblock User
                    </span>
                  </button>
                </div>
              </div>
            ))}
            {blockedIps.length === 0 && (
              <p className="text-zinc-500 text-sm text-center py-4">No IPs blocked.</p>
            )}
          </div>
        </div>

        <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-6 shadow-sm">
          <h3 className="text-lg font-semibold text-zinc-900 dark:text-white mb-4 flex items-center gap-2">
            <AlertTriangle className="h-5 w-5 text-amber-500" /> Feature Flags
          </h3>
          <div className="space-y-4">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-sm font-medium text-zinc-900 dark:text-white">Disable PDF Compression</p>
                <p className="text-xs text-zinc-500">High CPU Load Protection</p>
              </div>
              <label className="relative inline-flex cursor-pointer items-center">
                <input
                  type="checkbox"
                  className="peer sr-only"
                  checked={disableCompression}
                  onChange={handleCompressionToggle}
                />
                <div className="peer h-6 w-11 rounded-full bg-zinc-200 dark:bg-zinc-700 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-all after:content-[''] peer-checked:bg-amber-600 peer-checked:after:translate-x-full peer-focus:outline-none"></div>
              </label>
            </div>
            <div className="flex items-center justify-between">
              <div>
                <p className="text-sm font-medium text-zinc-900 dark:text-white">Disable Sign Ups</p>
                <p className="text-xs text-zinc-500">Stop new registrations</p>
              </div>
              <label className="relative inline-flex cursor-pointer items-center">
                <input
                  type="checkbox"
                  className="peer sr-only"
                  checked={disableSignups}
                  onChange={handleSignupToggle}
                />
                <div className="peer h-6 w-11 rounded-full bg-zinc-200 dark:bg-zinc-700 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-white after:transition-all after:content-[''] peer-checked:bg-amber-600 peer-checked:after:translate-x-full peer-focus:outline-none"></div>
              </label>
            </div>
          </div>
        </div>
      </div>

      <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 overflow-hidden shadow-sm">
        <div className="px-6 py-4 border-b border-zinc-200 dark:border-zinc-800 flex items-center gap-2">
          <FileText className="h-4 w-4 text-zinc-400" />
          <h3 className="text-sm font-semibold text-zinc-900 dark:text-white">System Audit Log</h3>
        </div>
        <div className="divide-y divide-zinc-200 dark:divide-zinc-800 max-h-[300px] overflow-y-auto">
          {[
            { action: "Admin 'Sarah' purged temp files", time: "10:45 AM", ip: "192.168.1.5" },
            { action: "User 'John' failed login (3 attempts)", time: "10:30 AM", ip: "10.0.0.42" },
            { action: "System Auto-Backup completed", time: "09:00 AM", ip: "LOCALHOST" },
            { action: "Admin 'Sarah' updated Free Tier Limits", time: "Yesterday", ip: "192.168.1.5" },
          ].map((log, i) => (
            <div key={i} className="px-6 py-3 flex items-center justify-between text-sm hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
              <span className="text-zinc-700 dark:text-zinc-300">{log.action}</span>
              <div className="flex items-center gap-4 text-xs text-zinc-500 font-mono">
                <span>{log.ip}</span>
                <span>{log.time}</span>
              </div>
            </div>
          ))}
        </div>
      </div>
    </AdminLayout >
  );
}

--------------------------------------------------
### File: src/pages/admin/Activity.jsx
--------------------------------------------------
import React, { useState, useEffect } from 'react';
import AdminLayout from './AdminLayout';
import { Search, FileText, Clock, User, Filter, AlertCircle, CheckCircle2, XCircle, Download, RefreshCw, Loader2 } from 'lucide-react';
import axios from 'axios';
import { useAuth } from '../../context/AuthContext';

export default function Activity() {
    const [activities, setActivities] = useState([]);
    const [stats, setStats] = useState(null);
    const [loading, setLoading] = useState(true);
    const [searchTerm, setSearchTerm] = useState('');
    const [operationFilter, setOperationFilter] = useState('ALL');
    const { token } = useAuth();

    useEffect(() => {
        if (token) {
            fetchActivities();
            fetchStats();
        }
    }, [token]);

    const fetchActivities = async () => {
        try {
            setLoading(true);
            const response = await axios.get('http://localhost:8080/api/admin/activity', {
                headers: { Authorization: `Bearer ${token}` }
            });
            setActivities(response.data);
        } catch (error) {
            console.error('Failed to fetch activities', error);
        } finally {
            setLoading(false);
        }
    };

    const fetchStats = async () => {
        try {
            const response = await axios.get('http://localhost:8080/api/admin/activity/stats', {
                headers: { Authorization: `Bearer ${token}` }
            });
            setStats(response.data);
        } catch (error) {
            console.error('Failed to fetch stats', error);
        }
    };

    const handleSearch = async () => {
        if (!searchTerm.trim()) {
            fetchActivities();
            return;
        }
        try {
            setLoading(true);
            const response = await axios.get(`http://localhost:8080/api/admin/activity/search?query=${encodeURIComponent(searchTerm)}`, {
                headers: { Authorization: `Bearer ${token}` }
            });
            setActivities(response.data);
        } catch (error) {
            console.error('Search failed', error);
        } finally {
            setLoading(false);
        }
    };

    const handleOperationFilter = async (operation) => {
        setOperationFilter(operation);
        if (operation === 'ALL') {
            fetchActivities();
            return;
        }
        try {
            setLoading(true);
            const response = await axios.get(`http://localhost:8080/api/admin/activity/operation/${operation}`, {
                headers: { Authorization: `Bearer ${token}` }
            });
            setActivities(response.data);
        } catch (error) {
            console.error('Filter failed', error);
        } finally {
            setLoading(false);
        }
    };

    const formatDate = (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleString('en-IN', {
            day: 'numeric',
            month: 'short',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });
    };

    const formatFileSize = (bytes) => {
        if (!bytes) return '-';
        if (bytes < 1024) return bytes + ' B';
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
        return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
    };

    const getOperationColor = (operation) => {
        const colors = {
            'MERGE': 'bg-blue-500/10 text-blue-400 border-blue-500/20',
            'SPLIT': 'bg-purple-500/10 text-purple-400 border-purple-500/20',
            'COMPRESS': 'bg-green-500/10 text-green-400 border-green-500/20',
            'ROTATE': 'bg-orange-500/10 text-orange-400 border-orange-500/20',
            'PROTECT': 'bg-red-500/10 text-red-400 border-red-500/20',
            'WATERMARK': 'bg-cyan-500/10 text-cyan-400 border-cyan-500/20',
            'UNLOCK': 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20',
        };
        return colors[operation] || 'bg-zinc-500/10 text-zinc-400 border-zinc-500/20';
    };

    const operations = ['ALL', 'MERGE', 'SPLIT', 'COMPRESS', 'ROTATE', 'PROTECT', 'WATERMARK', 'UNLOCK'];

    return (
        <AdminLayout>
            <div className="flex items-center justify-between mb-6">
                <div>
                    <h2 className="text-2xl font-bold text-zinc-900 dark:text-white tracking-tight">Activity Logs</h2>
                    <p className="text-zinc-500 dark:text-zinc-400 text-sm">Track all PDF operations performed by users.</p>
                </div>
                <button
                    onClick={() => { fetchActivities(); fetchStats(); }}
                    className="flex items-center gap-2 h-10 rounded-md bg-zinc-100 dark:bg-zinc-800 px-4 text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors"
                >
                    <RefreshCw className="h-4 w-4" /> Refresh
                </button>
            </div>

            {/* Stats Cards */}
            {stats && (
                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-4">
                        <p className="text-xs font-medium text-zinc-500 uppercase tracking-wider">Total Operations</p>
                        <p className="text-2xl font-bold text-zinc-900 dark:text-white mt-1">{stats.totalActivities || 0}</p>
                    </div>
                    {stats.byOperation && Object.entries(stats.byOperation).slice(0, 3).map(([op, count]) => (
                        <div key={op} className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 p-4">
                            <p className="text-xs font-medium text-zinc-500 uppercase tracking-wider">{op}</p>
                            <p className="text-2xl font-bold text-zinc-900 dark:text-white mt-1">{count}</p>
                        </div>
                    ))}
                </div>
            )}

            {/* Search & Filter */}
            <div className="flex flex-col md:flex-row gap-4 mb-6">
                <div className="relative flex-1">
                    <Search className="absolute left-3 top-2.5 h-4 w-4 text-zinc-400" />
                    <input
                        type="text"
                        placeholder="Search by email, operation, or filename..."
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                        onKeyDown={(e) => e.key === 'Enter' && handleSearch()}
                        className="h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 pl-9 pr-4 text-sm text-zinc-900 dark:text-zinc-200 focus:border-indigo-500 focus:outline-none shadow-sm"
                    />
                </div>
                <div className="flex gap-2 overflow-x-auto pb-2">
                    {operations.map((op) => (
                        <button
                            key={op}
                            onClick={() => handleOperationFilter(op)}
                            className={`px-3 py-2 rounded-md text-xs font-medium transition-colors whitespace-nowrap ${operationFilter === op
                                    ? 'bg-indigo-600 text-white'
                                    : 'bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700'
                                }`}
                        >
                            {op}
                        </button>
                    ))}
                </div>
            </div>

            {/* Activity Table */}
            {loading ? (
                <div className="flex items-center justify-center h-64">
                    <Loader2 className="h-8 w-8 animate-spin text-indigo-500" />
                </div>
            ) : activities.length === 0 ? (
                <div className="flex flex-col items-center justify-center h-64 text-zinc-500">
                    <FileText className="h-12 w-12 mb-4 opacity-50" />
                    <p>No activity logs found</p>
                    <p className="text-sm">User activities will appear here once they start using PDF tools</p>
                </div>
            ) : (
                <div className="rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 overflow-hidden shadow-sm">
                    <div className="overflow-x-auto">
                        <table className="w-full text-left text-sm">
                            <thead className="bg-zinc-50 dark:bg-zinc-950/50 text-zinc-500 dark:text-zinc-400">
                                <tr>
                                    <th className="px-4 py-3 font-medium">User</th>
                                    <th className="px-4 py-3 font-medium">Operation</th>
                                    <th className="px-4 py-3 font-medium">File(s)</th>
                                    <th className="px-4 py-3 font-medium">Size</th>
                                    <th className="px-4 py-3 font-medium">Status</th>
                                    <th className="px-4 py-3 font-medium">Timestamp</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-zinc-200 dark:divide-zinc-800">
                                {activities.map((activity) => (
                                    <tr key={activity.id} className="hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors">
                                        <td className="px-4 py-3">
                                            <div className="flex items-center gap-2">
                                                <div className="h-8 w-8 rounded-full bg-indigo-500/10 flex items-center justify-center">
                                                    <User className="h-4 w-4 text-indigo-500" />
                                                </div>
                                                <span className="font-medium text-zinc-900 dark:text-zinc-200 truncate max-w-[150px]" title={activity.userEmail}>
                                                    {activity.userEmail}
                                                </span>
                                            </div>
                                        </td>
                                        <td className="px-4 py-3">
                                            <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium border ${getOperationColor(activity.operation)}`}>
                                                {activity.operation}
                                            </span>
                                        </td>
                                        <td className="px-4 py-3">
                                            <span className="text-zinc-700 dark:text-zinc-300 truncate max-w-[200px] block" title={activity.inputFiles}>
                                                {activity.inputFiles || '-'}
                                            </span>
                                        </td>
                                        <td className="px-4 py-3 text-zinc-500">
                                            {formatFileSize(activity.fileSizeBytes)}
                                        </td>
                                        <td className="px-4 py-3">
                                            {activity.status === 'SUCCESS' ? (
                                                <span className="inline-flex items-center gap-1 text-green-500">
                                                    <CheckCircle2 className="h-4 w-4" /> Success
                                                </span>
                                            ) : activity.status === 'FAILED' ? (
                                                <span className="inline-flex items-center gap-1 text-red-500" title={activity.errorMessage}>
                                                    <XCircle className="h-4 w-4" /> Failed
                                                </span>
                                            ) : (
                                                <span className="inline-flex items-center gap-1 text-yellow-500">
                                                    <Clock className="h-4 w-4" /> Pending
                                                </span>
                                            )}
                                        </td>
                                        <td className="px-4 py-3 text-zinc-500">
                                            {formatDate(activity.createdAt)}
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            )}
        </AdminLayout>
    );
}


--------------------------------------------------
### File: src/components/AdminProtectedRoute.jsx
--------------------------------------------------
import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { Loader2 } from 'lucide-react';

/**
 * AdminProtectedRoute - Protects admin routes
 * 
 * This component checks:
 * 1. If user is authenticated
 * 2. If user has ADMIN role
 * 
 * Redirects to /admin/login if not authenticated or not admin
 */
export default function AdminProtectedRoute() {
    const { isAuthenticated, user, loading } = useAuth();

    // Show loading spinner while checking auth state
    if (loading) {
        return (
            <div className="min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white">
                <Loader2 className="h-8 w-8 animate-spin text-red-500 mb-4" />
                <span className="text-zinc-400">Verifying admin access...</span>
            </div>
        );
    }

    // Not authenticated - redirect to admin login
    if (!isAuthenticated) {
        return <Navigate to="/admin/login" replace />;
    }

    // Authenticated but not admin - show access denied and redirect
    if (user?.role !== 'ADMIN') {
        return (
            <div className="min-h-screen bg-zinc-950 flex flex-col items-center justify-center text-white">
                <div className="text-center p-8 bg-zinc-900 rounded-2xl border border-zinc-800 max-w-md">
                    <div className="w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/10 flex items-center justify-center">
                        <svg className="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                    <h2 className="text-xl font-bold mb-2">Access Denied</h2>
                    <p className="text-zinc-400 mb-4">You don't have administrator privileges to access this area.</p>
                    <a
                        href="/"
                        className="inline-block px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg text-white text-sm transition-colors"
                    >
                        Return to Home
                    </a>
                </div>
            </div>
        );
    }

    // Authenticated and is admin - render admin routes
    return <Outlet />;
}


--------------------------------------------------
### File: src/context/AuthContext.jsx
--------------------------------------------------
import React, { createContext, useState, useEffect, useContext } from 'react';

const AuthContext = createContext(null);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [token, setToken] = useState(null);
  const [loading, setLoading] = useState(true); // Default to true

  // Load state from localStorage on initial load
  useEffect(() => {
    const savedToken = localStorage.getItem('pdfly_auth_token');
    const savedRole = localStorage.getItem('pdfly_user_role');
    const savedEmail = localStorage.getItem('pdfly_user_email');
    const savedPlan = localStorage.getItem('pdfly_user_plan');
    const savedExpiry = localStorage.getItem('pdfly_plan_expiry');
    const savedUsage = localStorage.getItem('pdfly_daily_usage');

    if (savedToken && savedEmail) {
      setToken(savedToken);
      setUser({
        email: savedEmail,
        role: savedRole,
        plan: savedPlan,
        planExpiry: savedExpiry,
        dailyUsageCount: savedUsage ? parseInt(savedUsage) : 0
      });
    }
    // Set loading to false only after checking localStorage
    setLoading(false);
  }, []);

  // Function to handle successful login
  const login = (authToken, userEmail, userRole, userPlan, planExpiry, dailyUsageCount) => {
    localStorage.setItem('pdfly_auth_token', authToken);
    localStorage.setItem('pdfly_user_email', userEmail);
    localStorage.setItem('pdfly_user_role', userRole);
    localStorage.setItem('pdfly_user_plan', userPlan || 'FREE');
    localStorage.setItem('pdfly_plan_expiry', planExpiry || '');
    localStorage.setItem('pdfly_daily_usage', dailyUsageCount || 0);
    setToken(authToken);
    setUser({
      email: userEmail,
      role: userRole,
      plan: userPlan || 'FREE',
      planExpiry: planExpiry || '',
      dailyUsageCount: dailyUsageCount || 0
    });
  };

  // Function to handle logout
  const logout = () => {
    localStorage.removeItem('pdfly_auth_token');
    localStorage.removeItem('pdfly_user_email');
    localStorage.removeItem('pdfly_user_role');
    localStorage.removeItem('pdfly_user_plan');
    localStorage.removeItem('pdfly_plan_expiry');
    localStorage.removeItem('pdfly_daily_usage');
    setToken(null);
    setUser(null);
  };

  const refreshUser = async () => {
    if (!token) return;
    try {
      const response = await fetch('http://localhost:8080/api/auth/me', {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      if (response.ok) {
        const data = await response.json();
        login(token, data.email, data.role, data.plan, data.planExpiry, data.dailyUsageCount);
      }
    } catch (error) {
      console.error("Failed to refresh user data", error);
    }
  };

  const value = { user, token, login, logout, refreshUser, isAuthenticated: !!token, loading };

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
};

export const useAuth = () => {
  return useContext(AuthContext);
};

